var u=Object.defineProperty;var g=(t,o,n)=>o in t?u(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n;var l=(t,o,n)=>g(t,typeof o!="symbol"?o+"":o,n);(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(e){if(e.ep)return;e.ep=!0;const r=n(e);fetch(e.href,r)}})();class p{constructor(){l(this,"googlePhotosAPIEndpoint","https://photoslibrary.googleapis.com/v1/uploads")}async upload(o,n){const s=new Headers({Authorization:`Bearer ${n}`,"Content-Type":"application/octet-stream","X-Goog-Upload-Content-Type":o.type,"X-Goog-Upload-Protocol":"raw"}),e=await fetch(this.googlePhotosAPIEndpoint,{method:"POST",headers:s,body:o});if(!e.ok)throw new Error(`Upload failed with status: ${e.status}`);return await e.text()}}class f{setAccessToken(o){localStorage.setItem("accessToken",o)}getAccessToken(){return localStorage.getItem("accessToken")??""}}const c=document.querySelector("#camera-input"),i=document.querySelector("#camera-image"),d=new f,h=new p;c&&(c.style.visibility="hidden",i==null||i.addEventListener("click",()=>{c==null||c.click()}),c.addEventListener("change",async t=>{const o=t.target,n=o.files?o.files[0]:null;if(n)try{const s=d.getAccessToken(),e=await h.upload(n,s);console.log("Upload successful, upload token:",e)}catch(s){console.error("Error uploading image:",s)}}));function m(t){console.log("handled",t),d.setAccessToken(t.credential)}window.onload=function(){console.log("initializing"),window.google.accounts.id.initialize({client_id:"397214112278-cqkkgppbq08odlaoa7lglrf29evon1jd.apps.googleusercontent.com",callback:m}),window.google.accounts.id.prompt()};
